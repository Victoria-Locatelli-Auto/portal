{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
    <h2 class="mb-4">Editar Compliance</h2>

    <!-- Formulário principal -->
    <form action="{{ url_for('compliance.editar_compliance', id=compliance.id) }}" method="POST" enctype="multipart/form-data" class="form-grid">
        
        <!-- Nome -->
        <div class="form-group mb-3">
            <label for="nome">Nome do arquivo/site:</label>
            <input type="text" id="titulo" name="titulo" value="{{ compliance.titulo }}" required>
        </div>

        <!-- Descrição -->
        <div class="form-group mb-3">
            <label for="descricao">Breve descrição:</label>
            <textarea name="descricao" id="descricao" class="form-control" rows="4" required>{{ compliance.descricao }}</textarea>
        </div>

        <!-- Ícone PNG -->
        <div class="form-group mb-3">
            <label for="icone">Ícone PNG (substituir, opcional):</label>
            <input type="file" name="icone" id="icone" class="form-control" accept="image/png">
            {% if compliance.icone %}
                <p class="mt-2">Ícone atual: 
                    <img src="{{ url_for('static', filename='uploads/' ~ compliance.icone) }}" alt="Ícone atual" style="height:40px;">
                </p>
            {% endif %}
        </div>

        <!-- Link -->
        <div class="form-group mb-3">
            <label for="link">Link da Compliance:</label>
            <input type="url" id="link" name="link" class="form-control" value="{{ compliance.link }}" required>
        </div>

        <!-- Botões -->
        <div class="d-flex gap-2">
            <button type="submit" class="btn btn-success">Salvar Alterações</button>
            <a href="{{ url_for('compliance.listar_compliance') }}" class="btn btn-secondary">Cancelar</a>
        </div>
    </form>

    <!-- Form separado para desativar -->
    <form action="{{ url_for('compliance.desativar_compliance', id=compliance.id) }}" method="POST" onsubmit="return confirm('Tem certeza que deseja desativar esta política?');" class="mt-3">
        <button type="submit" class="btn btn-danger">Excluir Política</button>
    </form>
</div>
{% endblock %}
